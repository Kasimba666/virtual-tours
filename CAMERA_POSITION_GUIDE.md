# Руководство по использованию функции сохранения позиции камеры

## Обзор

Теперь в приложении Virtual Tours можно сохранять и восстанавливать параметры камеры для каждой сцены. Это позволяет пользователям сохранять оптимальный вид панорамы и возвращаться к нему при последующих просмотрах.

## Как это работает

### 1. Сохранение параметров камеры

1. Откройте редактор сцены (`/tour/:id/scene/:sceneId`)
2. Загрузите панораму
3. Настройте желаемое положение камеры (yaw, pitch, fov)
4. Нажмите кнопку **"Сделать начальным видом"**
5. Параметры камеры будут сохранены в базе данных

### 2. Восстановление параметров камеры

1. При открытии тура (`/tour/:id`) камера автоматически установится в сохраненную позицию для стартовой сцены
2. При переключении между сценами в режиме просмотра камера будет автоматически устанавливаться в сохраненные параметры для каждой сцены

## Визуальные индикаторы

- **В редакторе сцены**: Кнопка "Сделать начальным видом" показывает статус сохранения
- **В режиме просмотра**: Сцены с сохраненными параметрами камеры отмечаются значком ✓
- **Подсказки**: При наведении на элементы интерфейса показываются подсказки о функциональности

## Технические детали

### Сохранение данных

Параметры камеры сохраняются в базе данных в следующем формате:

```json
{
  "scenes": {
    "scene-1": {
      "name": "Гостиная",
      "panorama": "https://...",
      "startView": {
        "yaw": 1.57,
        "pitch": 0.2,
        "fov": 75
      }
    }
  },
  "startScene": "scene-1"
}
```

### Параметры камеры

- **yaw**: Угол поворота по горизонтали (в радианах)
- **pitch**: Угол наклона по вертикали (в радианах)
- **fov**: Угол обзора камеры (в градусах)

## Особенности реализации

1. **Автоматическое восстановление**: При загрузке панорамы параметры камеры применяются автоматически
2. **Плавное переключение**: При смене сцен параметры камеры сбрасываются и применяются новые
3. **Надежность**: Используются таймеры для надежного применения параметров после загрузки текстуры
4. **Обратная совместимость**: Если параметры камеры не сохранены, используется стандартная позиция

## Пример использования

1. Пользователь создает тур с несколькими сценами
2. Для каждой сцены он настраивает оптимальный вид и сохраняет параметры камеры
3. При последующем просмотре тура камера автоматически устанавливается в сохраненные позиции
4. Это создает более качественный и предсказуемый опыт просмотра виртуального тура

## Преимущества

- **Консистентность**: Все пользователи видят одинаковый начальный вид
- **Удобство**: Не нужно каждый раз настраивать положение камеры
- **Профессиональный вид**: Тур выглядит более продуманным и качественным
- **Гибкость**: Каждая сцена может иметь свою уникальную начальную позицию